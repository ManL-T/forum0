{"remainingRequest":"/home/mnl33/code/vue-forum/Forum-MVP/node_modules/babel-loader/lib/index.js!/home/mnl33/code/vue-forum/Forum-MVP/node_modules/eslint-loader/index.js??ref--14-0!/home/mnl33/code/vue-forum/Forum-MVP/src/store/modules/users.js","dependencies":[{"path":"/home/mnl33/code/vue-forum/Forum-MVP/src/store/modules/users.js","mtime":1643627038760},{"path":"/home/mnl33/code/vue-forum/Forum-MVP/babel.config.js","mtime":1640544182000},{"path":"/home/mnl33/code/vue-forum/Forum-MVP/node_modules/cache-loader/dist/cjs.js","mtime":1643186739485},{"path":"/home/mnl33/code/vue-forum/Forum-MVP/node_modules/babel-loader/lib/index.js","mtime":1643186739974},{"path":"/home/mnl33/code/vue-forum/Forum-MVP/node_modules/eslint-loader/index.js","mtime":1643186739542}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL21ubDMzL2NvZGUvdnVlLWZvcnVtL0ZvcnVtLU1WUC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9ob21lL21ubDMzL2NvZGUvdnVlLWZvcnVtL0ZvcnVtLU1WUC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAnQC9oZWxwZXJzL2ZpcmViYXNlJzsKaW1wb3J0IHsgZmluZEJ5SWQsIGRvY1RvUmVzb3VyY2UgfSBmcm9tICdAL2hlbHBlcnMnOwpleHBvcnQgZGVmYXVsdCB7CiAgc3RhdGU6IHsKICAgIGl0ZW1zOiBbXQogIH0sCiAgZ2V0dGVyczogewogICAgdXNlcjogZnVuY3Rpb24gdXNlcihzdGF0ZSwgZ2V0dGVycywgcm9vdFN0YXRlKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoaWQpIHsKICAgICAgICBjb25zb2xlLmxvZygnZ2V0dGVycyBpbiB1c2VyOiAnLCBnZXR0ZXJzKTsKICAgICAgICBjb25zb2xlLmxvZygnb24gdXNlciBnZXR0ZXIgdGhpcyBpcyB0aGUgaWQgdG8gZ2V0IHRoZSB1c2VyOiAnLCBpZCk7CiAgICAgICAgY29uc29sZS5sb2coJ29uIHVzZXIgZ2V0dGVyIHRoaXMgaXMgdGhlIHJlc291cmNlcyB0byBnZXQgdGhlIHVzZXI6ICcsIHN0YXRlLml0ZW1zKTsKICAgICAgICB2YXIgdXNlciA9IGZpbmRCeUlkKHN0YXRlLml0ZW1zLCBpZCk7CiAgICAgICAgaWYgKCF1c2VyKSByZXR1cm4gbnVsbDsKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB1c2VyKSwge30sIHsKICAgICAgICAgIC8vIGF1dGhVc2VyIGRpc2N1c3Npb25zICYgc2Nvb3BzCiAgICAgICAgICBnZXQgZGlzY3Vzc2lvbnMoKSB7CiAgICAgICAgICAgIHJldHVybiByb290U3RhdGUuZGlzY3Vzc2lvbnMuaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChkaXNjdXNzaW9uKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGRpc2N1c3Npb24udXNlcklkID09PSB1c2VyLmlkOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0sCgogICAgICAgICAgZ2V0IHNjb29wcygpIHsKICAgICAgICAgICAgcmV0dXJuIHJvb3RTdGF0ZS5zY29vcHMuaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChzY29vcCkgewogICAgICAgICAgICAgIHJldHVybiBzY29vcC51c2VySWQgPT09IHVzZXIuaWQ7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICB9KTsKICAgICAgfTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGZldGNoVXNlcnM6IGZ1bmN0aW9uIGZldGNoVXNlcnMoX3JlZiwgX3JlZjIpIHsKICAgICAgdmFyIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaDsKICAgICAgdmFyIGlkcyA9IF9yZWYyLmlkczsKICAgICAgcmV0dXJuIGRpc3BhdGNoKCdmZXRjaEl0ZW1zJywgewogICAgICAgIHJlc291cmNlOiAndXNlcnMnLAogICAgICAgIGlkczogaWRzCiAgICAgIH0sIHsKICAgICAgICByb290OiB0cnVlCiAgICAgIH0pOwogICAgfSwKICAgIGZldGNoVXNlcjogZnVuY3Rpb24gZmV0Y2hVc2VyKF9yZWYzLCBfcmVmNCkgewogICAgICB2YXIgZGlzcGF0Y2ggPSBfcmVmMy5kaXNwYXRjaDsKICAgICAgdmFyIGlkID0gX3JlZjQuaWQ7CiAgICAgIHJldHVybiBkaXNwYXRjaCgnZmV0Y2hJdGVtJywgewogICAgICAgIHJlc291cmNlOiAndXNlcnMnLAogICAgICAgIGlkOiBpZAogICAgICB9LCB7CiAgICAgICAgcm9vdDogdHJ1ZQogICAgICB9KTsKICAgIH0sCiAgICBjcmVhdGVVc2VyOiBmdW5jdGlvbiBjcmVhdGVVc2VyKF9yZWY1LCBfcmVmNikgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjb21taXQsIGlkLCBuYW1lLCB1c2VybmFtZSwgZW1haWwsIHVzZXJuYW1lTG93ZXIsIHVzZXIsIHVzZXJSZWYsIG5ld1VzZXI7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjUuY29tbWl0OwogICAgICAgICAgICAgICAgaWQgPSBfcmVmNi5pZCwgbmFtZSA9IF9yZWY2Lm5hbWUsIHVzZXJuYW1lID0gX3JlZjYudXNlcm5hbWUsIGVtYWlsID0gX3JlZjYuZW1haWw7CiAgICAgICAgICAgICAgICB1c2VybmFtZUxvd2VyID0gdXNlcm5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgIGVtYWlsID0gZW1haWwudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgIHVzZXIgPSB7CiAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSwKICAgICAgICAgICAgICAgICAgdXNlcm5hbWVMb3dlcjogdXNlcm5hbWVMb3dlciwKICAgICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gZmlyZWJhc2UuZmlyZXN0b3JlKCkuY29sbGVjdGlvbigndXNlcnMnKS5kb2MoaWQpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICB1c2VyUmVmID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHVzZXJSZWYuc2V0KHVzZXIpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJSZWYuZ2V0KCk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBuZXdVc2VyID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0SXRlbScsIHsKICAgICAgICAgICAgICAgICAgcmVzb3VyY2U6ICd1c2VycycsCiAgICAgICAgICAgICAgICAgIGl0ZW06IG5ld1VzZXIKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBkb2NUb1Jlc291cmNlKG5ld1VzZXIpKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB1cGRhdGVVc2VyOiBmdW5jdGlvbiB1cGRhdGVVc2VyKF9yZWY3LCB1c2VyKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBjb21taXQsIHVwZGF0ZXMsIHVzZXJSZWY7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWY3LmNvbW1pdDsKICAgICAgICAgICAgICAgIHVwZGF0ZXMgPSB7CiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lIHx8IG51bGwsCiAgICAgICAgICAgICAgICAgIGJpbzogdXNlci5iaW8gfHwgbnVsbCwKICAgICAgICAgICAgICAgICAgbG9jYXRpb246IHVzZXIubG9jYXRpb24gfHwgbnVsbAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHVzZXJSZWYgPSBmaXJlYmFzZS5maXJlc3RvcmUoKS5jb2xsZWN0aW9uKCd1c2VycycpLmRvYyh1c2VyLmlkKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiB1c2VyUmVmLnVwZGF0ZSh1cGRhdGVzKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRJdGVtJywgewogICAgICAgICAgICAgICAgICByZXNvdXJjZTogJ3VzZXJzJywKICAgICAgICAgICAgICAgICAgaXRlbTogdXNlcgogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIGFwcGVuZERpc2N1c3Npb25Ub1VzZXI6IGZ1bmN0aW9uIGFwcGVuZERpc2N1c3Npb25Ub1VzZXIoc3RhdGUsIF9yZWY4KSB7CiAgICAgIHZhciB1c2VySWQgPSBfcmVmOC51c2VySWQsCiAgICAgICAgICBkaXNjdXNzaW9uSWQgPSBfcmVmOC5kaXNjdXNzaW9uSWQ7CiAgICAgIHZhciB1c2VyID0gZmluZEJ5SWQoc3RhdGUuaXRlbXMsIHVzZXJJZCk7CiAgICAgIHVzZXIuZGlzY3Vzc2lvbnMgPSB1c2VyLmRpc2N1c3Npb25zIHx8IFtdOyAvLyBjcmVhdGUgdGhlIGFycmF5IGlmIGRvZXMgbm90IGFscmVhZHkgZXhpc3QKCiAgICAgIHVzZXIuZGlzY3Vzc2lvbnMucHVzaChkaXNjdXNzaW9uSWQpOwogICAgICBjb25zb2xlLmxvZygnZGlzY3Vzc2lvbklkIGdldHMgYXBwZW5kZWQgaW50byB0aGlzIHVzZXI6ICcsIHVzZXIpOwogICAgfSwKICAgIGFwcGVuZFNjb29wVG9Vc2VyOiBmdW5jdGlvbiBhcHBlbmRTY29vcFRvVXNlcihzdGF0ZSwgX3JlZjkpIHsKICAgICAgdmFyIHVzZXJJZCA9IF9yZWY5LnVzZXJJZCwKICAgICAgICAgIHNjb29wSWQgPSBfcmVmOS5zY29vcElkOwogICAgICB2YXIgdXNlciA9IGZpbmRCeUlkKHN0YXRlLml0ZW1zLCB1c2VySWQpOwogICAgICB1c2VyLnNjb29wcyA9IHVzZXIuc2Nvb3BzIHx8IFtdOyAvLyBpZiBhcnJheSBub3QgZXhpc3RzLCBjcmVhdGUgaXQKCiAgICAgIHVzZXIuc2Nvb3BzLnB1c2goc2Nvb3BJZCk7CiAgICAgIGNvbnNvbGUubG9nKCdzY29vcElkIGdldHMgYXBwZW5kZWQgaW50byB0aGlzIHVzZXI6ICcsIHVzZXIpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/mnl33/code/vue-forum/Forum-MVP/src/store/modules/users.js"],"names":["firebase","findById","docToResource","state","items","getters","user","rootState","id","console","log","discussions","filter","discussion","userId","scoops","scoop","actions","fetchUsers","dispatch","ids","resource","root","fetchUser","createUser","commit","name","username","email","usernameLower","toLowerCase","firestore","collection","doc","userRef","set","get","newUser","item","updateUser","updates","bio","location","update","mutations","appendDiscussionToUser","discussionId","push","appendScoopToUser","scoopId"],"mappings":"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","sourcesContent":["import firebase from '@/helpers/firebase'\nimport { findById, docToResource } from '@/helpers'\n\nexport default {\n    state: {\n        items: [],\n    },\n    getters: {\n        user: (state, getters, rootState) => {\n            return (id) => {\n                console.log('getters in user: ', getters)\n                console.log('on user getter this is the id to get the user: ', id)\n                console.log('on user getter this is the resources to get the user: ', state.items)\n                const user = findById(state.items, id)\n                if (!user) return null\n                return {\n                    ...user,\n                    // authUser discussions & scoops\n                    get discussions () {\n                        return rootState.discussions.items.filter(discussion => discussion.userId === user.id)\n                    },\n                    get scoops () {\n                        return rootState.scoops.items.filter(scoop => scoop.userId === user.id)\n                    }\n                }\n            }\n        },\n    },\n    actions: {\n        fetchUsers: ({ dispatch }, { ids }) => dispatch('fetchItems', { resource: 'users', ids }, { root: true }),\n        fetchUser: ({ dispatch }, { id }) => dispatch('fetchItem', { resource: 'users', id }, { root: true }),\n        async createUser ({commit}, {id, name, username, email}) {\n            const usernameLower = username.toLowerCase()\n            email = email.toLowerCase()\n            const user = { name, username, usernameLower, email }\n            const userRef = await firebase.firestore().collection('users').doc(id)\n            userRef.set(user)\n            const newUser = await userRef.get()\n            commit('setItem', { resource: 'users', item: newUser}, { root: true })\n            return docToResource(newUser)\n        },\n        async updateUser ({commit}, user) {\n            const updates = {\n                username: user.username || null,\n                bio: user.bio || null,\n                location: user.location || null\n            }\n            const userRef = firebase.firestore().collection('users').doc(user.id)\n            await userRef.update(updates)\n            commit('setItem', { resource: 'users', item: user }, { root: true })\n        },\n    },\n    mutations: {\n        appendDiscussionToUser (state, { userId, discussionId }) {\n            const user = findById(state.items, userId)\n            user.discussions = user.discussions || []  // create the array if does not already exist\n            user.discussions.push(discussionId)\n            console.log('discussionId gets appended into this user: ', user )\n        },\n        appendScoopToUser ( state, { userId, scoopId }) {\n            const user = findById(state.items, userId)\n            user.scoops = user.scoops || [] // if array not exists, create it\n            user.scoops.push(scoopId)\n            console.log('scoopId gets appended into this user: ', user )\n        },\n    }\n}"]}]}