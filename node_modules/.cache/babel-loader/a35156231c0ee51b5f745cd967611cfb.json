{"remainingRequest":"/home/mnl33/code/vue-forum/Forum-MVP/node_modules/thread-loader/dist/cjs.js!/home/mnl33/code/vue-forum/Forum-MVP/node_modules/babel-loader/lib/index.js!/home/mnl33/code/vue-forum/Forum-MVP/node_modules/eslint-loader/index.js??ref--14-0!/home/mnl33/code/vue-forum/Forum-MVP/src/store/actions.js","dependencies":[{"path":"/home/mnl33/code/vue-forum/Forum-MVP/src/store/actions.js","mtime":1643201303769},{"path":"/home/mnl33/code/vue-forum/Forum-MVP/babel.config.js","mtime":1640544182000},{"path":"/home/mnl33/code/vue-forum/Forum-MVP/node_modules/cache-loader/dist/cjs.js","mtime":1643186739485},{"path":"/home/mnl33/code/vue-forum/Forum-MVP/node_modules/thread-loader/dist/cjs.js","mtime":1643186739453},{"path":"/home/mnl33/code/vue-forum/Forum-MVP/node_modules/babel-loader/lib/index.js","mtime":1643186739974},{"path":"/home/mnl33/code/vue-forum/Forum-MVP/node_modules/eslint-loader/index.js","mtime":1643186739542}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL21ubDMzL2NvZGUvdnVlLWZvcnVtL0ZvcnVtLU1WUC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9ob21lL21ubDMzL2NvZGUvdnVlLWZvcnVtL0ZvcnVtLU1WUC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IGZpcmViYXNlIGZyb20gJ0AvaGVscGVycy9maXJlYmFzZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBmZXRjaEl0ZW06IGZ1bmN0aW9uIGZldGNoSXRlbShfcmVmLCBfcmVmMikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgdmFyIGlkID0gX3JlZjIuaWQsCiAgICAgICAgcmVzb3VyY2UgPSBfcmVmMi5yZXNvdXJjZSwKICAgICAgICBfcmVmMiRoYW5kbGVVbnN1YnNjcmkgPSBfcmVmMi5oYW5kbGVVbnN1YnNjcmliZSwKICAgICAgICBoYW5kbGVVbnN1YnNjcmliZSA9IF9yZWYyJGhhbmRsZVVuc3Vic2NyaSA9PT0gdm9pZCAwID8gbnVsbCA6IF9yZWYyJGhhbmRsZVVuc3Vic2NyaTsKICAgIGNvbnNvbGUubG9nKCdBY3Rpb24gPj4gaW4gcHJvY2VzcyBvZiBmZXRjaGluZyBpdGVtLCBmZXRjaCBmcm9tIHRoaXMgaWQ6ICcsIGlkKTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICB2YXIgdW5zdWJzY3JpYmUgPSBmaXJlYmFzZS5maXJlc3RvcmUoKS5jb2xsZWN0aW9uKHJlc291cmNlKS5kb2MoaWQpLm9uU25hcHNob3QoZnVuY3Rpb24gKGRvYykgewogICAgICAgIGlmIChkb2MuZXhpc3RzKSB7CiAgICAgICAgICB2YXIgaXRlbSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZG9jLmRhdGEoKSksIHt9LCB7CiAgICAgICAgICAgIGlkOiBkb2MuaWQKICAgICAgICAgIH0pOwoKICAgICAgICAgIGNvbnNvbGUubG9nKCdvbiBzbmFwc2hvdDogJywgcmVzb3VyY2UsIGRvYy5kYXRhKCkpOwogICAgICAgICAgY29tbWl0KCdzZXRJdGVtJywgewogICAgICAgICAgICByZXNvdXJjZTogcmVzb3VyY2UsCiAgICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgICAgaXRlbTogaXRlbQogICAgICAgICAgfSk7CiAgICAgICAgICByZXNvbHZlKGl0ZW0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXNvbHZlKG51bGwpOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICBpZiAoaGFuZGxlVW5zdWJzY3JpYmUpIHsKICAgICAgICBoYW5kbGVVbnN1YnNjcmliZSh1bnN1YnNjcmliZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29tbWl0KCdhcHBlbmRVbnN1YnNjcmliZScsIHsKICAgICAgICAgIHVuc3Vic2NyaWJlOiB1bnN1YnNjcmliZQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICB9LAogIGZldGNoSXRlbXM6IGZ1bmN0aW9uIGZldGNoSXRlbXMoX3JlZjMsIF9yZWY0KSB7CiAgICB2YXIgZGlzcGF0Y2ggPSBfcmVmMy5kaXNwYXRjaDsKICAgIHZhciByZXNvdXJjZSA9IF9yZWY0LnJlc291cmNlLAogICAgICAgIGlkcyA9IF9yZWY0LmlkczsKICAgIGlkcyA9IGlkcyB8fCBbXTsKICAgIGNvbnNvbGUubG9nKCd0aGUgaWRzOiAnLCBpZHMpOwogICAgcmV0dXJuIFByb21pc2UuYWxsKGlkcy5tYXAoZnVuY3Rpb24gKGlkKSB7CiAgICAgIHJldHVybiBkaXNwYXRjaCgnZmV0Y2hJdGVtJywgewogICAgICAgIGlkOiBpZCwKICAgICAgICByZXNvdXJjZTogcmVzb3VyY2UKICAgICAgfSk7CiAgICB9KSk7CiAgfSwKICB1bnN1YnNjcmliZUFsbFNuYXBzaG90czogZnVuY3Rpb24gdW5zdWJzY3JpYmVBbGxTbmFwc2hvdHMoX3JlZjUpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBzdGF0ZSwgY29tbWl0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmNS5zdGF0ZSwgY29tbWl0ID0gX3JlZjUuY29tbWl0OwogICAgICAgICAgICAgIHN0YXRlLnVuc3Vic2NyaWJlcy5mb3JFYWNoKGZ1bmN0aW9uICh1bnN1YnNjcmliZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY29tbWl0KCdjbGVhckFsbFVuc3Vic2NyaWJlcycpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0KfTs="},{"version":3,"sources":["/home/mnl33/code/vue-forum/Forum-MVP/src/store/actions.js"],"names":["firebase","fetchItem","commit","id","resource","handleUnsubscribe","console","log","Promise","resolve","unsubscribe","firestore","collection","doc","onSnapshot","exists","item","data","fetchItems","dispatch","ids","all","map","unsubscribeAllSnapshots","state","unsubscribes","forEach"],"mappings":";;;;;;;;AAAA,OAAOA,QAAP,MAAqB,oBAArB;AAEA,eAAe;AACXC,EAAAA,SADW,kCACwD;AAAA,QAAtDC,MAAsD,QAAtDA,MAAsD;AAAA,QAA1CC,EAA0C,SAA1CA,EAA0C;AAAA,QAAtCC,QAAsC,SAAtCA,QAAsC;AAAA,sCAA5BC,iBAA4B;AAAA,QAA5BA,iBAA4B,sCAAR,IAAQ;AAC/DC,IAAAA,OAAO,CAACC,GAAR,CAAY,6DAAZ,EAA2EJ,EAA3E;AACA,WAAO,IAAIK,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC5B,UAAMC,WAAW,GAAGV,QAAQ,CAACW,SAAT,GAAqBC,UAArB,CAAgCR,QAAhC,EAA0CS,GAA1C,CAA8CV,EAA9C,EAAkDW,UAAlD,CAA6D,UAACD,GAAD,EAAS;AACtF,YAAIA,GAAG,CAACE,MAAR,EAAgB;AACZ,cAAMC,IAAI,mCAAQH,GAAG,CAACI,IAAJ,EAAR;AAAoBd,YAAAA,EAAE,EAAEU,GAAG,CAACV;AAA5B,YAAV;;AACAG,UAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BH,QAA7B,EAAuCS,GAAG,CAACI,IAAJ,EAAvC;AACAf,UAAAA,MAAM,CAAC,SAAD,EAAY;AAAEE,YAAAA,QAAQ,EAARA,QAAF;AAAYD,YAAAA,EAAE,EAAFA,EAAZ;AAAgBa,YAAAA,IAAI,EAAJA;AAAhB,WAAZ,CAAN;AACAP,UAAAA,OAAO,CAACO,IAAD,CAAP;AACH,SALD,MAKO;AACHP,UAAAA,OAAO,CAAC,IAAD,CAAP;AACH;AACJ,OATmB,CAApB;;AAUA,UAAIJ,iBAAJ,EAAuB;AACnBA,QAAAA,iBAAiB,CAACK,WAAD,CAAjB;AACH,OAFD,MAEO;AACHR,QAAAA,MAAM,CAAC,mBAAD,EAAsB;AAACQ,UAAAA,WAAW,EAAXA;AAAD,SAAtB,CAAN;AACH;AACJ,KAhBM,CAAP;AAiBH,GApBU;AAqBXQ,EAAAA,UArBW,oCAqBkC;AAAA,QAA/BC,QAA+B,SAA/BA,QAA+B;AAAA,QAAjBf,QAAiB,SAAjBA,QAAiB;AAAA,QAAPgB,GAAO,SAAPA,GAAO;AACzCA,IAAAA,GAAG,GAAGA,GAAG,IAAI,EAAb;AACAd,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBa,GAAzB;AACA,WAAOZ,OAAO,CAACa,GAAR,CAAYD,GAAG,CAACE,GAAJ,CAAQ,UAAAnB,EAAE;AAAA,aAAIgB,QAAQ,CAAC,WAAD,EAAc;AAAEhB,QAAAA,EAAE,EAAFA,EAAF;AAAMC,QAAAA,QAAQ,EAARA;AAAN,OAAd,CAAZ;AAAA,KAAV,CAAZ,CAAP;AACH,GAzBU;AA0BLmB,EAAAA,uBA1BK,0CA0BqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAhBC,cAAAA,KAAgB,SAAhBA,KAAgB,EAATtB,MAAS,SAATA,MAAS;AAC5CsB,cAAAA,KAAK,CAACC,YAAN,CAAmBC,OAAnB,CAA2B,UAAAhB,WAAW;AAAA,uBAAIA,WAAW,EAAf;AAAA,eAAtC;AACAR,cAAAA,MAAM,CAAC,sBAAD,CAAN;;AAF4C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAG/C;AA7BU,CAAf","sourcesContent":["import firebase from '@/helpers/firebase'\n\nexport default {\n    fetchItem ({ commit }, { id, resource, handleUnsubscribe = null }) {\n        console.log('Action >> in process of fetching item, fetch from this id: ', id)\n        return new Promise((resolve) => {\n            const unsubscribe = firebase.firestore().collection(resource).doc(id).onSnapshot((doc) => {\n                if (doc.exists) {\n                    const item = { ...doc.data(), id: doc.id }\n                    console.log('on snapshot: ', resource, doc.data())\n                    commit('setItem', { resource, id, item })\n                    resolve(item)\n                } else {\n                    resolve(null)\n                }\n            })\n            if (handleUnsubscribe) {\n                handleUnsubscribe(unsubscribe)\n            } else {\n                commit('appendUnsubscribe', {unsubscribe})\n            }\n        })\n    },\n    fetchItems ({ dispatch }, { resource, ids }) {\n        ids = ids || []\n        console.log('the ids: ', ids)\n        return Promise.all(ids.map(id => dispatch('fetchItem', { id, resource })))\n    },\n    async unsubscribeAllSnapshots ({state, commit}) {\n        state.unsubscribes.forEach(unsubscribe => unsubscribe())\n        commit('clearAllUnsubscribes')\n    }\n}"]}]}