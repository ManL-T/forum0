{"remainingRequest":"/home/mnl33/code/vue-forum/Forum-MVP/node_modules/thread-loader/dist/cjs.js!/home/mnl33/code/vue-forum/Forum-MVP/node_modules/babel-loader/lib/index.js!/home/mnl33/code/vue-forum/Forum-MVP/node_modules/eslint-loader/index.js??ref--14-0!/home/mnl33/code/vue-forum/Forum-MVP/src/store/modules/auth.js","dependencies":[{"path":"/home/mnl33/code/vue-forum/Forum-MVP/src/store/modules/auth.js","mtime":1643200239520},{"path":"/home/mnl33/code/vue-forum/Forum-MVP/babel.config.js","mtime":1640544182000},{"path":"/home/mnl33/code/vue-forum/Forum-MVP/node_modules/cache-loader/dist/cjs.js","mtime":1643186739485},{"path":"/home/mnl33/code/vue-forum/Forum-MVP/node_modules/thread-loader/dist/cjs.js","mtime":1643186739453},{"path":"/home/mnl33/code/vue-forum/Forum-MVP/node_modules/babel-loader/lib/index.js","mtime":1643186739974},{"path":"/home/mnl33/code/vue-forum/Forum-MVP/node_modules/eslint-loader/index.js","mtime":1643186739542}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL21ubDMzL2NvZGUvdnVlLWZvcnVtL0ZvcnVtLU1WUC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAnQC9oZWxwZXJzL2ZpcmViYXNlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHsKICAgIGF1dGhJZDogbnVsbCwKICAgIGF1dGhVc2VyVW5zdWJzY3JpYmU6IG51bGwsCiAgICBhdXRoT2JzZXJ2ZXJVbnN1YnNjcmliZTogbnVsbAogIH0sCiAgZ2V0dGVyczogewogICAgYXV0aFVzZXI6IGZ1bmN0aW9uIGF1dGhVc2VyKHN0YXRlLCByb290U3RhdGUsIGdldHRlcnMsIHJvb3RHZXR0ZXJzKSB7CiAgICAgIGNvbnNvbGUubG9nKCdyb290U3RhdGU6ICcsIHJvb3RTdGF0ZSk7CiAgICAgIGNvbnNvbGUubG9nKCdnZXR0ZXJzOiAnLCBnZXR0ZXJzKTsKICAgICAgcmV0dXJuIHJvb3RHZXR0ZXJzWyd1c2VyJ10oc3RhdGUuYXV0aElkKTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGluaXRBdXRoZW50aWNhdGlvbjogZnVuY3Rpb24gaW5pdEF1dGhlbnRpY2F0aW9uKF9yZWYpIHsKICAgICAgdmFyIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaCwKICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0LAogICAgICAgICAgc3RhdGUgPSBfcmVmLnN0YXRlOwogICAgICBpZiAoc3RhdGUuYXV0aE9ic2VydmVyVW5zdWJzY3JpYmUpIHJldHVybjsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgdmFyIHVuc3Vic2NyaWJlID0gZmlyZWJhc2UuYXV0aCgpLm9uQXV0aFN0YXRlQ2hhbmdlZCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh1c2VyKSB7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGhlIHVzZXIgaGFzIGNoYW5nZWQuIFVzZXI6ICcsIHVzZXIpOwogICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKCd1bnN1YnNjcmliZUF1dGhVc2VyU25hcHNob3QnKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCF1c2VyKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdmZXRjaEF1dGhVc2VyJyk7CgogICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh1c2VyKTsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG51bGwpOwoKICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICAgIH0pKTsKCiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfTsKICAgICAgICB9KCkpOwogICAgICAgIGNvbW1pdCgnc2V0QXV0aE9ic2VydmVyVW5zdWJzY3JpYmUnLCB1bnN1YnNjcmliZSk7CiAgICAgIH0pOwogICAgfSwKICAgIGZldGNoQXV0aFVzZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9mZXRjaEF1dGhVc2VyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihfcmVmMykgewogICAgICAgIHZhciBfZmlyZWJhc2UkYXV0aCRjdXJyZW47CgogICAgICAgIHZhciBkaXNwYXRjaCwgc3RhdGUsIGNvbW1pdCwgdXNlcklkOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkaXNwYXRjaCA9IF9yZWYzLmRpc3BhdGNoLCBzdGF0ZSA9IF9yZWYzLnN0YXRlLCBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICAgICAgICAgICAgICB1c2VySWQgPSAoX2ZpcmViYXNlJGF1dGgkY3VycmVuID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyKSA9PT0gbnVsbCB8fCBfZmlyZWJhc2UkYXV0aCRjdXJyZW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9maXJlYmFzZSRhdXRoJGN1cnJlbi51aWQ7CgogICAgICAgICAgICAgICAgaWYgKHVzZXJJZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdmZXRjaEl0ZW0nLCB7CiAgICAgICAgICAgICAgICAgIHJlc291cmNlOiAndXNlcnMnLAogICAgICAgICAgICAgICAgICBpZDogdXNlcklkLAogICAgICAgICAgICAgICAgICBoYW5kbGVVbnN1YnNjcmliZTogZnVuY3Rpb24gaGFuZGxlVW5zdWJzY3JpYmUodW5zdWJzY3JpYmUpIHsKICAgICAgICAgICAgICAgICAgICBjb21taXQoJ3NldEF1dGhVc2VyVW5zdWJzY3JpYmUnLCB1bnN1YnNjcmliZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0QXV0aElkJywgdXNlcklkKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1c2luZyBzdGF0ZSB0byBnZXQgYXV0aElkOiAnLCBzdGF0ZS5hdXRoSWQpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBmZXRjaEF1dGhVc2VyKF94MikgewogICAgICAgIHJldHVybiBfZmV0Y2hBdXRoVXNlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZmV0Y2hBdXRoVXNlcjsKICAgIH0oKSwKICAgIHJlZ2lzdGVyVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkOiBmdW5jdGlvbiByZWdpc3RlclVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChfcmVmNCwgX3JlZjUpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIGRpc3BhdGNoLCBlbWFpbCwgbmFtZSwgdXNlcm5hbWUsIHBhc3N3b3JkLCByZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjQuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgICBlbWFpbCA9IF9yZWY1LmVtYWlsLCBuYW1lID0gX3JlZjUubmFtZSwgdXNlcm5hbWUgPSBfcmVmNS51c2VybmFtZSwgcGFzc3dvcmQgPSBfcmVmNS5wYXNzd29yZDsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBmaXJlYmFzZS5hdXRoKCkuY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCd1c2Vycy9jcmVhdGVVc2VyJywgewogICAgICAgICAgICAgICAgICBpZDogcmVzdWx0LnVzZXIudWlkLAogICAgICAgICAgICAgICAgICBlbWFpbDogZW1haWwsCiAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkaXNwYXRjaGluZyBmZXRjaEF1dGhVc2VyJyk7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdmZXRjaEF1dGhVc2VyJyk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZDogZnVuY3Rpb24gc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoY29udGV4dCwgX3JlZjYpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIGVtYWlsLCBwYXNzd29yZDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZW1haWwgPSBfcmVmNi5lbWFpbCwgcGFzc3dvcmQgPSBfcmVmNi5wYXNzd29yZDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBmaXJlYmFzZS5hdXRoKCkuc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoZW1haWwsIHBhc3N3b3JkKSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNpZ25PdXQ6IGZ1bmN0aW9uIHNpZ25PdXQoX3JlZjcpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIGNvbW1pdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjcuY29tbWl0OwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGZpcmViYXNlLmF1dGgoKS5zaWduT3V0KCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0QXV0aElkJywgbnVsbCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHVuc3Vic2NyaWJlQXV0aFVzZXJTbmFwc2hvdDogZnVuY3Rpb24gdW5zdWJzY3JpYmVBdXRoVXNlclNuYXBzaG90KF9yZWY4KSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHZhciBzdGF0ZSwgY29tbWl0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzdGF0ZSA9IF9yZWY4LnN0YXRlLCBjb21taXQgPSBfcmVmOC5jb21taXQ7CgogICAgICAgICAgICAgICAgaWYgKHN0YXRlLmF1dGhVbnN1YnNjcmliZSkgewogICAgICAgICAgICAgICAgICBzdGF0ZS5hdXRoVXNlclVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0QXV0aFVzZXJVbnN1YnNjcmliZScsIG51bGwpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgc2V0QXV0aElkOiBmdW5jdGlvbiBzZXRBdXRoSWQoc3RhdGUsIGlkKSB7CiAgICAgIGNvbnNvbGUubG9nKCdzZXR0aW5nIG11dGF0aW9uIGF1dGhJZCB0byBsb2dnZWQgaW4gdXNlciB3aXRoIGlkOiAnLCBpZCk7CiAgICAgIHN0YXRlLmF1dGhJZCA9IGlkOwogICAgICBjb25zb2xlLmxvZygnYXV0aElkOiAnLCBzdGF0ZS5hdXRoSWQpOwogICAgfSwKICAgIHNldEF1dGhVc2VyVW5zdWJzY3JpYmU6IGZ1bmN0aW9uIHNldEF1dGhVc2VyVW5zdWJzY3JpYmUoc3RhdGUsIHVuc3Vic2NyaWJlKSB7CiAgICAgIHN0YXRlLmF1dGhVc2VyVW5zdWJzY3JpYmUgPSB1bnN1YnNjcmliZTsKICAgIH0sCiAgICBzZXRBdXRoT2JzZXJ2ZXJVbnN1YnNjcmliZTogZnVuY3Rpb24gc2V0QXV0aE9ic2VydmVyVW5zdWJzY3JpYmUoc3RhdGUsIHVuc3Vic2NyaWJlKSB7CiAgICAgIHN0YXRlLmF1dGhPYnNlcnZlclVuc3Vic2NyaWJlID0gdW5zdWJzY3JpYmU7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/home/mnl33/code/vue-forum/Forum-MVP/src/store/modules/auth.js"],"names":["firebase","namespaced","state","authId","authUserUnsubscribe","authObserverUnsubscribe","getters","authUser","rootState","rootGetters","console","log","actions","initAuthentication","dispatch","commit","Promise","resolve","unsubscribe","auth","onAuthStateChanged","user","fetchAuthUser","userId","currentUser","uid","resource","id","handleUnsubscribe","root","registerUserWithEmailAndPassword","email","name","username","password","createUserWithEmailAndPassword","result","signInWithEmailAndPassword","context","signOut","unsubscribeAuthUserSnapshot","authUnsubscribe","mutations","setAuthId","setAuthUserUnsubscribe","setAuthObserverUnsubscribe"],"mappings":"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","sourcesContent":["import firebase from '@/helpers/firebase'\n\nexport default {\n    namespaced: true,\n    state: {\n        authId: null,\n        authUserUnsubscribe: null,\n        authObserverUnsubscribe: null\n    },\n    getters: {\n        authUser: (state, rootState, getters, rootGetters) => {\n            console.log('rootState: ', rootState)\n            console.log('getters: ', getters)\n            return rootGetters['user'](state.authId)\n        }\n    },\n    actions: {\n        initAuthentication ({ dispatch, commit, state }) {\n            if (state.authObserverUnsubscribe) return\n            return new Promise((resolve) => {\n                const unsubscribe = firebase.auth().onAuthStateChanged( async (user) => {\n                    console.log('the user has changed. User: ', user)\n                    dispatch('unsubscribeAuthUserSnapshot')\n                    if(user) {\n                        await dispatch('fetchAuthUser')\n                        resolve(user)\n                    } else {\n                        resolve(null)\n                    }\n                })\n                commit('setAuthObserverUnsubscribe', unsubscribe)\n            })\n        },\n        fetchAuthUser: async ({ dispatch, state, commit }) => {\n            const userId = firebase.auth().currentUser?.uid\n            if(!userId) return\n            await dispatch('fetchItem', { \n                resource: 'users', \n                id: userId,\n                handleUnsubscribe: (unsubscribe) => {\n                    commit('setAuthUserUnsubscribe', unsubscribe)\n                }},\n                { root: true })\n            commit('setAuthId', userId)\n            console.log('using state to get authId: ', state.authId)\n        },\n        async registerUserWithEmailAndPassword ({dispatch}, { email, name, username, password }) {\n            const result = await firebase.auth().createUserWithEmailAndPassword(email, password)\n            await dispatch('users/createUser', { id: result.user.uid, email, name, username })\n            console.log('dispatching fetchAuthUser')\n            await dispatch('fetchAuthUser')\n        },\n        async signInWithEmailAndPassword (context, { email, password }) {\n            return firebase.auth().signInWithEmailAndPassword(email, password)\n        },\n        async signOut ({commit}) {\n            await firebase.auth().signOut()\n            commit('setAuthId', null)\n        },\n        async unsubscribeAuthUserSnapshot ({ state, commit }) {\n            if (state.authUnsubscribe) {\n                state.authUserUnsubscribe()\n                commit('setAuthUserUnsubscribe', null)\n            }\n        }\n    },\n    mutations: {\n        setAuthId (state, id) {\n            console.log('setting mutation authId to logged in user with id: ', id)\n            state.authId = id\n            console.log('authId: ',state.authId)\n        },\n        setAuthUserUnsubscribe (state, unsubscribe) {\n            state.authUserUnsubscribe = unsubscribe\n        },\n        setAuthObserverUnsubscribe (state, unsubscribe) {\n            state.authObserverUnsubscribe = unsubscribe\n        }\n    }\n}"]}]}